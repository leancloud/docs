---
title: 数据导出与迁移指引
sidebar_label: 数据导出与迁移
sidebar_position: 1
---

LeanCloud 服务将在 x 年 x 月 x 日停服下线。为了帮助您顺利完成数据迁移，我们准备了这份数据的导出与迁移指南。

## 数据导出

### 数据存储

存储结构化数据提供多种导出机制。通过控制台前往「数据存储」 > 「导入导出」 ，您可以分别进行「数据导出」和「备份导出」。其中，

* 数据导出，支持按时间范围筛选，它提供了 JSON 格式的导出文件；
* 备份导出，则提供的是当日凌晨数据库备份的 BSON 格式的文件，它可用于 mongorestore 直接导入 MongoDB 数据库。


![storage - export](/img/storage/export.png)

除此之外，您还可以通过 REST API 进行迁移导出，我们推荐使用 Scan 接口进行遍历导出。请参考文档 [遍历
Class](/sdk/storage/guide/rest/#遍历-class)。

### 文件

文件存储主要包含文件元数据和文件内容。其中文件元数据以 `_File` 表的形式存储在结构化数据中，可参考上述 [存储](#存储) 小结进行导出。

在得到文件元数据后，可遍历元数据通过文件域名 `+key` 的方式构建 url， 之后下载文件内容即可。

### 内建账户

内建账户以 `_User` 表的形式存储在结构化数据中，它的导出方式与存储结构化数据一致，请参考上面的内容。

需要注意的是导出数据中的 `password` 字段是加密存储的，加密算法请参考文档[导出用户数据的加密算法](/sdk/start/dashboard/#导出用户数据的加密算法)。

### 推送

推送主要包含设备信息和推送记录。其中设备信息以 `_Installation` 表的形式存储在结构化数据中，可参考上述 [存储](#存储) 小结进行导出。

推送记录仅保留最近 7 天的数据，可通过 REST API 进行导出，请参考[推送记录查询](/sdk/push/guide/rest/#推送记录查询)。

### 即时通讯

即时通讯主要包含会话数据和历史消息。其中会话数据以 `_Conversation` 表的形式存储在结构化数据中，可参考上述 [存储](#存储) 小结进行导出。

历史消息需要通过 REST API 进行导出，可以导出[应用内所有历史消息](/sdk/im/guide/rest/#查询应用内所有历史消息)，也可以导出
[指定会话的历史消息](/sdk/im/guide/rest/#查询历史消息-1)。


### 云引擎

云引擎使用标准的容器技术构建镜像，您可在其它容器云平台重新构建和部署您的应用。

### LeanDB 托管数据库

可在控制台的实例面板中，点击「...」按钮，即可导出并下载数据库备份。

### 短信

您需要在其它短信服务商处重新报备签名和模版。

### 排行榜

排行榜的榜单，可通过控制台进行存档，之后下载存档 CSV 进行导出。

如果需要榜单的热数据，则可以通过 REST API 进行遍历导出，请参考[查询排行榜](/sdk/leaderboard/guide/rest/#查询排行榜)。

## 常见问题

## 技术支持

如果您在数据导出和迁移过程中遇到问题，可以通过工单联系我们。

---

**再次感谢您对 LeanCloud 的支持。**

